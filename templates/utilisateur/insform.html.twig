<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
{% set normal_input_attr = { 'attr': { 'class': 'form-control input-box form-ensurance-header-control', 'required': 'required'} } %}
{% for flashMessage in app.flashes('error') %}
    <div class="alert alert-danger" id='flash-message'>{{ flashMessage }}</div>
{% endfor %}
{{ form_start(form, {'attr': {'class': 'mb-3', 'novalidate': 'novalidate'}}) }}
    <div class="form-floating mb-3">
        {{ form_widget(form.nom,normal_input_attr|merge({'id': 'floatingInsNom'})) }}
        {{ form_label(form.nom,"Nom", {'label_attr': {'for': form.nom.vars.id}}) }}
        {{ form_errors(form.nom) }}
    </div>
    <div class="form-floating mb-3">
        {{ form_widget(form.prenom,normal_input_attr|merge({'id': 'floatingInsPrenom'})) }}
        {{ form_label(form.prenom,"Prénom", {'label_attr': {'for': form.prenom.vars.id}}) }}
        {{ form_errors(form.prenom) }}
    </div>
    <div class="form-floating mb-3">
        {{ form_widget(form.email,normal_input_attr|merge({'id': 'floatingInsEmail'})) }}
        {{ form_label(form.email,"E-mail", {'label_attr': {'for': form.email.vars.id}}) }}
        {{ form_errors(form.email) }}
    </div>
    <div class="form-floating mb-3">
        {{ form_widget(form.mdp,normal_input_attr|merge({'id': 'floatingInsMdp', 'type': 'password'})) }}
        {{ form_label(form.mdp,"Mot de Passe", {'label_attr': {'for': form.mdp.vars.id}}) }}
        {{ form_errors(form.mdp) }}
    </div>
    <div class="form-floating mb-3">
        {{ form_widget(form.adresse,normal_input_attr|merge({'id': 'floatingInsAdr'})) }}
        {{ form_label(form.adresse,"Adresse", {'label_attr': {'for': form.adresse.vars.id}}) }}
        {{ form_errors(form.adresse) }}
    </div>
    <div class="form-floating mb-3">
        {{ form_widget(form.tel,normal_input_attr|merge({'id': 'floatingInsTel'})) }}
        {{ form_label(form.tel,"Télephone", {'label_attr': {'for': form.tel.vars.id}}) }}
        {{ form_errors(form.tel) }}
    </div>
    {{ form_label(form.date_n,"Date de naissance", {'label_attr': {'for': form.date_n.vars.id}}) }}
    <div class="form-floating mb-3">
        {{ form_widget(form.date_n, {'attr': {'id' :'floatingInsDateN','class': 'datepicker', 'data-date-format': 'dd-mm-yyyy'}}) }}
        {{ form_errors(form.date_n) }}
    </div>
    <div class="col-12 d-grid">
    <button type="submit" class="btn btn-primary rounded-pill" id="submit-btn" onclick="return validateForm();">{{ button_label|default("Sign up") }}</button>
    <p class="text-400 mt-3 text-center">To proceed to the login page <a href="{{ path('login') }}">Click here</a></p>
    </div>
{{ form_end(form) }}


<script>
    // Remove flash message after 5 seconds
    setTimeout(function() {
        var flashMessage = document.getElementById('flash-message');
        if (flashMessage) {
            flashMessage.remove();
        }
    }, 5000); // 5000 milliseconds = 5 seconds

    $(document).ready(function(){
        $('.datepicker').datepicker({
            format: 'dd-mm-yyyy', // Define the date format
            autoclose: true, // Close the datepicker when a date is selected
            todayHighlight: true // Highlight today's date
        });
    });
</script>